# Контроллеры

- [Введение](#Введение)
- [Создание контроллера](#Создание-контроллера)
- [Вывод результата](#Вывод-результата)
- [Предзагрузка контроллера](#Предзагрузка-контроллера)

<a name="Введение"></a>
## Введение

Контроллер в MyUCP это класс который исполняет какие задачи которые мы опишем и работаем с разными моделями и библиотеками.

<a name="Создание-контроллера"></a>
## Создание контроллера

Для создания контроллера необходимо создать файл в папке `/app/controllers`. Название файла должно совпадать с названием вашего будущего контроллера. Для примера мы будем создавать контроллер под названием `View`. Во избежание совпадения названий классов советуем создавать контроллеры с словом в названии <em>Controller</em>.

После создания файла в нем необходимо создать класс:

```php
<?php

class ViewController extends Controller 
{
	public function index() 
	{
		//
	}
}
```

Как видим до нашего названия необходимо добавить слово **Controller** что бы убрать возможность совпадения в названиях классов. Так же наш класс контроллера необходимо расширить основным классом Controller что бы получить доступ до всех объектов.

После создания контроллеров необходимо создать методы с которыми Вы в дальнейшем будете работать. Методы должны указываться как публичные функции (<em>public</em>), так же метод может принимать различные параметры которые вы можете ему указать при помощи <a href="/docs/5.7/routing">маршрутизации</a>.

<a name="Вывод-результата"></a>
## Вывод результата

Каждый метод который будет вызван через маршрут может вернуть результат для пользователя. При помощи `return` вы можете вернуть этот самый результат. Обычно принято возвращать <a href="/docs/5.7/views">шаблоны</a>.

```php
<?php

class HomeController extends Controller 
{	
	public function welcome() 
	{
	    return view('welcome');
	}
}
```

<a name="Предзагрузка-контроллера"></a>
## Предзагрузка контроллера

Когда вы создаете контроллер, вы можете разбивать вашу систему на разные блоки, но иногда
путь к контроллеру может быть слишком длинный, вы можете указать "алиас" для контроллера,
или просто указать путь к контроллеру который не лежит в директории `app/controllers`.

Абстрактный класс от которого наследуются котроллеры `Controller` имеет методы для работы с путями котроллера,
и так же есть класс `ControllerLoader`, который и выполняет эти действия, а методы в классе `Controller` просто имеют
такие-же называния и ссылаются на методы `ControllerLoader`.

Все методы для работы с контроллерами являются статическими.

Метод `::alias()` укажет путь к контроллеру с конкретным названием, обычено этот метод используеться при создании расширения,
что бы указать пути к контроллерам расширения:

```php
Controller::alias('UserController', 'extensions/Auth/controllers/UserController.php');
```

Теперь когда вы в маршруте укажете название `UserController`, оно будет автоматически вызвано из файла который указан выше.

Метод `::load()` загрузит файл контроллера для инциализации того, он так же поддерживает разделение директорий через точку:

```php
Controller::load('Admin.UsersController');
```

В примере выше контроллер будет загружен по пути `app/controllers/Admin/UsersController.php`.

Метод `::path()` даст возможность вам получить полный путь к файлу с контроллером:

```php
Controller::path('Admin.UsersController');
```

Таким образом мы получим путь следующего вида `app/controllers/Admin/UsersController.php`.

Метод `::name()` возвратит вам название класса контроллера, например для его инциализации.

```php
Controller::name('Admin.UsersController');
```

В результете будет возвращенно название контроллера `UserController`.