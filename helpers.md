# Помощники

- [Введение](#Введение)
- [Список функций](#Список-функций)
	- [app()](#app)
	- [dd()](#dd)
	- [ci()](#ci)
	- [model()](#model)
	- [view()](#view)
	- [route()](#route)
	- [redirect()](#redirect)
	- [refresh()](#refresh)
	- [cookie()](#cookie)
	- [config()](#config)
	- [abort()](#abort)
	- [session()](#session)
	- [flash()](#flash)
	- [lang()](#lang)
	- [redirect_url()](#redirect_url)
	- [url()](#url)
	- [asset()](#asset)
	- [data_get()](#data_get)
	- [array_wrap()](#array_wrap)
	- [request()](#request)
	- [response()](#response)
	- [value()](#value)
	- [method_field()](#method_field)
	- [csrf_token()](#csrf_token)
	- [csrf_field()](#csrf_field)
	- [extension()](#extension)
	- [env()](#env)
	

<a name="Введение"></a>
## Введение

Помощники - глобальные функции фреймворка которые созданы для упрощения написания некоторых участков кода.
В фреймворки они используються сами, но вы так же можете найти применение их в своем коде.

<a name="Список-функций"></a>
## Список функций

<a name="app"></a>
### app()

Функция предназначена для возвращения объекта класса `Application`.
При помощи неё вы можете получить доступ к классам которые инициализируються в общий контейнер
или инициализации при запуске приложения. В качестве аргумента может принимать алиас класса который необходимо получить.
Подробнее о работае контейнера можно почитать в разделе <a href="/docs/5.7/container">Контейнер</a>.

```php
app()->make("router");
app("router");
```

<a name="dd"></a>
### dd()

Функция для отображения данных массива, объекта. Выводит в удобном виде дерева на страницу. В качестве первого параметра вы указываете ваш массив или объект для просмотра, в качестве второго параметра вы можете указать завершать ли работу фреймворка после отображения дерева (указав значение <em>true</em>) или продолжить работу после вывода (указав значение <em>false</em>). По умолчанию в качестве второго параметра установлено значение <em>true</em>.

```php
$array = ["hello", "world"];
dd($array);
```

Результат примера выше будет такой:

```php
array(2) {
  [0]   =>
  string(5) "hello"
  [1]   =>
  string(5) "world"
}
```

<a name="ci"></a>
### ci()

Отчасти функция схожа с функцией `dd()`, но только данная функция выводит на страницу все доступные методы указанного вами класса.

<a name="model"></a>
### model()

Функция позволяет загрузить модель и работать с ней в контроллере. Подробнее о моделях <a href="/docs/5.7/model">тут</a>.
После выполнения она возвращает массив с объектами моделей.

```php
list($user, $post) = model("User", "Post");
```

<a name="view"></a>
### view()

Функция поможет вам вызвать шаблон и передать в него данные, подробнее о загрузке шаблново вы можете
почитать в разделе <a href="/docs/5.7/views">Шаблоны</a>.

```php
return view('greeting', ['name' => "Elon"]);
```

<a name="route"></a>
### route()

Функция которая возвращает в качестве ответа объект класса `Route`, а именно сам маршрут
для взаимодействия с ним. Может быть указано в качестве аргумента в некоторые функции для взаимодействия с маршрутом.

Если аргумент не указан, возвращает объект текущего маршрута.

```php
$current = route();
$route = route("home");
```

<a name="redirect"></a>
### redirect()

Удобная функция для совершения переадресаций на желаемый вами адрес. Возвращает объект класса `Redirect`
В качестве аргумента просто укажите адрес:

```php
redirect("/login");
```

Вы так же можете передать, в качестве аргумента, метод `route()`, указав в качестве его метода название одного из маршрутов, функция осуществит переадресация по указанному вами маршруту.

```php
redirect(route("user.login"));
```

Подробнее о переадрессации можно прочитать в разделе <a href="/docs/5.7/responses#Переадрессация">Ответ (RESPONSE)</a>.

<a name="refresh"></a>
### refresh()

Функция для того что произвести обновление страницы, очень удобно после использования POST запроса для предотвращения повторной отправки формы.

```php
return refresh();
```

<a name="cookie"></a>
### cookie()

Функция для получения объекта `Cookie`:

```php
cookie("token");
```

Подробнее об объекте `Cookie` можно прочитать в разделе <a href="/docs/5.7/requests#Cookie">Requests</a>

<a name="config"></a>
### config()

Функция для получения объекта `Config`:

```php
$url = config()->url;
```

Подробнее об объекте `Config` можно прочитать в разделе <a href="/docs/5.7/configs">Конфигурация</a>

<a name="abort"></a>
### abort()

Функция необходима для вызова HTTP ошибки, в качестве первого аргумента принимает код ошибки, а в качестве второго аргумента принимает сообщение ошибки (не обязательно).

```php
abort(404, "Страница не найдена");
```

```php
if(...) {
    abort(403);
}
```

<a name="session"></a>
### session()

Функция для получения значения сессии:

```php
$id = session("user_id");
```

Если в качестве второго аргумента указать какое то значение, то оно будет возвращено если ключа указаного в качестве
первого аргумента не будет найдено.

```php
$login = session("user_login", "elon");
```

Если не указывать аргументы то функция вернет объект класса `Session`. Подробнее о методах данного класса можно узнать в разделе <a href="/docs/5.7/session">Сессия</a>.

```php
session()->put('user_id', 3);
```

<a name="flash"></a>
### flash()

Функция нужна для получения <a href="/docs/5.7/session#Одноразовые-flash-данные">flash данных</a>.

```php
$error = flash("error");
```

<a name="lang"></a>
### lang()

Это которткий способ вызова метода `Lang::get`. Для этой функции так же существует
директива в <a href="/docs/5.7/zara">шаблонизаторе Zara</a> `@lang` и принимает точно такие же параметры
что и сама функция.

```php
lang("profile/settings.login")
```

Подробнее об объекте `Lang` можно прочитать в разделе <a href="/docs/5.7/localization">Локализация</a>

<a name="redirect_url"></a>
### redirect_url()

Функция предназначена для формирования URL опеределенного маршрута который указан первым аргументом, в качестве второго аргуммента принимает массив данных с заменой аргументов маршрута.

```php
redirect_url("user.profile", ["id" => 5]);
```

<a name="url"></a>
### url()

Функция возвращает объект класса `UrlGenerator` и позволяет формировать адреса.

```php
url("home"); // Будет сформирован адрес к /home
url()->route("home"); // Будет сформирован адрес к маршруту с именем Route
```

Вы так же можете передать в функцию объект класса `Route` для формирования адреса к нему или передать название маршрута.

```php
url(route('user.login');
url('user.login');
```

<a name="asset"></a>
### asset()

Функция генерирует URL к вашим файлам стиля или другим файлам которые хранятся в директории `assets`

```php
$image = asset('image.png') // assets/image.png
```

<a name="data_get"></a>
### data_get()

Функция возвращает значение с массива который использует точечное (`.`) разделение.

```php
$data = ['products' => ['desk' => ['price' => 100]]];

$price = data_get($data, 'products.desk.price');

// 100
```

Так же, третьим аргументом функция принимает стандартное значение которое будет возвращено если данные по указанным ключам не найдены.

```php
$discount = data_get($data, 'products.desk.discount', 0);

// 0
```

Вы так же можете вернуть какое-то значение по ключу из многомерного массива:

```php
$data = [
    'product-one' => ['name' => 'Desk 1', 'price' => 100],
    'product-two' => ['name' => 'Desk 2', 'price' => 150],
];

data_get($data, '*.name');

// ['Desk 1', 'Desk 2'];
```

<a name="array_wrap"></a>
### array_wrap()

Функция вернет переданное значение в качестве массива, если оно не было массивом.

```php
$string = 'Google';

$array = array_wrap($string);

// ['Google']
```

Если значение `null` то будет возвращен пустой массив

```php
$nothing = null;

$array = array_wrap($nothing);

// []
```

<a name="request"></a>
### request()

Возвращает объект класса `Request`.

```php
request();
app("request"); // Аналогично что и выше
```

Если в качестве аргумента передать значение, оно будет взято из переданных значений при обращении страницы.

```php
request('name');

Request::input('name'); 
```

Выше указаны одинаковые способы получения данных.

<a name="response"></a>
### response()

Возвращает объект класса `Response`.

```php
response();
app("response"); // Аналогично что и выше
```

Подробнее об классе `Response` можно почитать в разделе <a href="/docs/5.7/response">Ответ (RESPONSE)</a>

<a name="value"></a>
### value()

Функция вернет значение переменной, если эта перемення была функцией (то есть передан объект `Closure`) то будет вернет её результат.

```php
$result = value(true);

// true

$result = value(function () {
    return false;
});

// false
```

<a name="method_field"></a>
### method_field()

Возвращает скрытое html поле для формы, которое дает возможность указать тип запроса для маршрутов.

```php
echo method_field("DELETE");

// <input type="hidden" name="_method" value="DELETE">
```

```php
<form method="POST">
    {{ method_field('DELETE') }}
</form>
```

<a name="csrf_token"></a>
### csrf_token()

Данная функция вернет текущий CSRF токен:

```php
$token = csrf_token();
```

<a name="csrf_field"></a>
### csrf_field()

Функция вернет сгенерированное html поле с CSRF токеном, вы можете использовать функцию в шаблонах:

```php
<?php echo csrf_field() ?>
```

Или при помощи синтаксиса <a href="/docs/5.7/zara">Zara</a>:

```php
{{ csrf_field() }}
```

<a name="extension"></a>
### extension()

Функция поможет запустить или инициализировать расширение которое передано в качестве первого аргумента, второй и последующие аргументы будут
переданы в само расширение как дополнительные:

```php
$auth = extension('Auth');
```

Вы так же можете использовать сокращенную версию функции `ext()`, она полностью идентична.

<a name="env"></a>
### env()

Функция возвращает значение переменной окружения, или возвращает стандартное значение которое передано вторым аргументом:

```php
$url = env('APP_URL');

// Будет возвращено http://localhost если APP_URL не установлено
$url = env('APP_URL', 'http://localhost');
```

Подробнее о переменных окружения можно почитать в разделе <a href="/docs/5.7/configs">Конфигурация</a>