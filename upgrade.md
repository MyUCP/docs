# Руководство по обновлению

- [Обновление до 5.5 с 5.4](#Обновление-до-5.5-с-5.4)

<a name="Обновление-до-5.5-с-5.4"></a>
## Обновление до 5.5 с 5.4

#### Предполагаемое время обновления: около 10 минут

> **Примечание:** новая версия не содержит критических изменений старых методов, все принципы работы остались прежними.

### Обновление файлов
Прежде всего обновление затронуло все директории которые были в директории `protected`, теперь там осталось несколько файлов и те были переименованы и их название начинается с большой буквы. Так же некоторые файлы были распределены по директориям, некоторые с одинаковым названием. Если просто загрузить папку `engine` с заменой файлов проблем возникнуть не должно.

### Упрощение работы с моделями
Раньше из за проблемы работы с несколькими моделями конструктор неверно создавал запросы, теперь эта проблема исправлена и в моделях можно просто использовать указатель на объект модели:

```php
Builder::table($this->table)->first(); //Чаще всего встречалось для обхода проблемы
$this->first(); //Теперь упрощено и можно использовать предварительно указав параметр $table в моделе
```

### Обновление главного конфигурационного файла
В новой версии была добавлена <a href="/docs/5.5/localization">Локализация</a> которая требует в главном конфиге два новых параметра:

```php
// Язык локализации который бдет использоватся на сайте
'locale'        =>      'ru',
 
// Резервный язык локализации
'fallback_locale'=>     'ru',

```

### Убраны функции
В новой версии были убраны функции которые были в объекте `Controller`, теперь эти функции не доступны, ранее они заменяли шаблоиназатор и тем самым расширяли количество шаблонов в одном контроллере. Теперь они полностью убраны и не функционируют. Если они использовались в вашей системе следует их заменить на систему <a href="/docs/5.5/views">шаблонов</a>.

### Функция route()
Теперь функция `route()` возвращает экземпляр класса `RouteHelper`, тем самым все данные возвращаются в видео объекта, а не массива как раньше, поэтому стоит заменить в коде использование массивов на объект.

```php
route()['rule']; //Старая версия
route()->rule; //Новая версия
```